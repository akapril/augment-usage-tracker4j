# 状态栏显示问题排查指南

> 适用于 GoLand 2025.1 及其他 JetBrains IDE

如果您在安装 Augment 使用量监控插件后，发现状态栏没有显示使用量信息，请按照以下步骤进行排查和修复。

## 🔍 **快速检查清单**

### 1. 确认插件已正确安装
- 进入 `文件` → `设置` → `插件`
- 在 `已安装` 标签页中查找 "Augment 使用量监控"
- 确保插件已启用（勾选框已选中）

### 2. 检查状态栏设置
- 进入 `文件` → `设置` → `工具` → `Augment 使用量监控`
- 确保 "显示在状态栏" 选项已勾选
- 确保 "启用追踪器" 选项已勾选

### 3. 重启 IDE
- 完全关闭 GoLand/IDE
- 重新启动 IDE
- 等待项目完全加载

## 🛠️ **自动诊断工具**

### 使用内置诊断功能
1. 进入 `文件` → `设置` → `工具` → `Augment 使用量监控`
2. 点击 `诊断状态栏` 按钮
3. 查看诊断报告
4. 按照报告中的建议进行修复

### 诊断报告说明
- ✅ **正常状态**: 所有检查通过，组件应该正常显示
- ❌ **异常状态**: 发现问题，按照建议解决方案操作

## 🔧 **手动修复步骤**

### 方法一：强制刷新状态栏
1. 在设置页面点击 `诊断状态栏` 按钮
2. 等待诊断完成
3. 如果显示"已尝试强制启用状态栏组件"，检查状态栏
4. 如果仍未显示，重启 IDE

### 方法二：重新安装插件
1. 卸载当前插件：`设置` → `插件` → 找到插件 → `卸载`
2. 重启 IDE
3. 重新安装插件
4. 重启 IDE

### 方法三：检查 IDE 日志
1. 进入 `帮助` → `在资源管理器中显示日志`
2. 打开 `idea.log` 文件
3. 搜索 "Augment" 或 "StatusBar"
4. 查看是否有错误信息

## 📋 **常见问题和解决方案**

### 问题1：插件安装后状态栏无显示
**可能原因**：
- IDE 版本兼容性问题
- 状态栏组件注册失败
- 插件初始化异常

**解决方案**：
1. 确认 IDE 版本 ≥ 2023.1
2. 使用诊断工具检查
3. 重启 IDE
4. 重新安装插件

### 问题2：状态栏显示"未认证"
**可能原因**：
- 未配置 Cookie
- Cookie 已过期
- 网络连接问题

**解决方案**：
1. 配置正确的 Augment Cookie
2. 测试网络连接
3. 点击状态栏查看详细信息

### 问题3：状态栏显示"错误"
**可能原因**：
- API 连接失败
- Cookie 无效
- 服务器问题

**解决方案**：
1. 检查网络连接
2. 更新 Cookie
3. 在设置中点击"测试连接"

## 🔍 **详细诊断信息**

### 检查插件日志
在 IDE 日志中查找以下关键信息：

```
AugmentStatusBarWidgetFactory.createWidget() called
AugmentStatusBarWidget initialized
Widget installed successfully
```

### 检查状态栏组件
1. 查看状态栏右侧是否有 Augment 相关显示
2. 正常显示格式：`用户名: 101/600 ●`
3. 鼠标悬停应显示详细工具提示

## 🚀 **验证修复结果**

### 成功标志
- ✅ 状态栏右侧显示使用量信息
- ✅ 鼠标悬停显示详细工具提示
- ✅ 点击状态栏弹出详细信息对话框
- ✅ 设置页面显示"状态：已认证"

### 如果仍有问题
1. 收集 IDE 日志文件
2. 记录具体的错误信息
3. 提交问题报告到项目仓库

## 📞 **获取帮助**

如果按照上述步骤仍无法解决问题，请：

1. **收集信息**：
   - IDE 版本和内部版本号
   - 操作系统版本
   - 插件版本
   - 错误日志

2. **提交问题**：
   - GitHub Issues: [项目仓库](https://github.com/akapril/augment-usage-tracker-idea/issues)
   - 包含详细的问题描述和日志信息

3. **临时解决方案**：
   - 使用浏览器直接访问 app.augmentcode.com 查看使用量
   - 定期手动检查使用情况

## 📝 **版本兼容性说明**

### 支持的 IDE 版本
- **最低版本**: 2023.1
- **推荐版本**: 2023.2+
- **最高版本**: 2025.3
- **当前测试**: GoLand 2025.1 (252.23309.35)

### 支持的 IDE 类型
- IntelliJ IDEA (Ultimate & Community)
- PyCharm (Professional & Community)
- WebStorm, PhpStorm, CLion
- GoLand, RubyMine, DataGrip
- Rider, AppCode, MPS
- Android Studio

---

**最后更新**: 2024-12-21  
**适用版本**: Augment 使用量监控 v1.0.0
